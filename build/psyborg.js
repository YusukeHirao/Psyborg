/**
 * Psyborg.js - v0.2.1 r657
 * update: 2013-10-31
 * Author: Yusuke Hirao [http://www.yusukehirao.com]
 * Github: https://github.com/YusukeHirao/Psyborg
 * License: Licensed under the MIT License
 * Require: jQuery v1.10.x
 */

var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},psyborg;!function(a){var b=jQuery;!function(a){a[a.NONE=0]="NONE",a[a.RETURN=1]="RETURN",a[a.LOOP=2]="LOOP"}(a.PsycleRepeat||(a.PsycleRepeat={}));var c=a.PsycleRepeat;!function(a){a[a.INIT=0]="INIT",a[a.PANEL_CHANGE_START=1]="PANEL_CHANGE_START",a[a.PANEL_CHANGE_END=2]="PANEL_CHANGE_END",a[a.PANEL_CHANGE_CANCEL=3]="PANEL_CHANGE_CANCEL",a[a.WAIT_START=4]="WAIT_START",a[a.WAIT_END=5]="WAIT_END"}(a.PsycleEvent||(a.PsycleEvent={})),a.PsycleEvent,function(a){a[a.INIT=0]="INIT",a[a.TRANSITION_END=1]="TRANSITION_END",a[a.RESIZE=2]="RESIZE",a[a.RESIZE_START=3]="RESIZE_START",a[a.RESIZE_END=4]="RESIZE_END"}(a.PsycleReflowTiming||(a.PsycleReflowTiming={}));var d=a.PsycleReflowTiming,e=function(){function a(a){this.type=a,this.defaultPrevented=!1,this.timeStamp=(new Date).valueOf()}return a.prototype.preventDefault=function(){this.defaultPrevented=!0},a}(),f=function(){function a(){this._listeners={}}return a.prototype.on=function(a,b){for(var c=a.split(/\s+/),d=0,e=c.length;e>d;d++)this._listeners[c[d]]=b},a.prototype.off=function(a,b){for(var c,d=a.split(/\s+/),e=0,f=d.length;f>e;e++)c=d[e],(null==b||this._listeners[c]===b)&&delete this._listeners[c]},a.prototype.trigger=function(a,b,c){"undefined"==typeof b&&(b={}),"undefined"==typeof c&&(c=this);var d;if(d=this._listeners[a]){var f=new e(a);return f.data=b,d.call(c,f),!f.defaultPrevented}return!0},a}();a.EventDispacther=f;var g=function(){function a(a,c){this.name=a,b.extend(this,c)}return a.create=function(b){var c,d;for(c in b)d=new a(c,b[c]),a.transitions[c]=d},a.transitions={},a}();a.PsycleTransition=g;var h=function(){function a(a,b,c){this.index=b,this.$el=a,this._list=c}return a.prototype.show=function(){return this.$el.show(),this},a.prototype.hide=function(){return this.$el.hide(),this},a.prototype.clone=function(){var a=new i(this.$el.clone(),this.index,this._list);return this.$el.after(a.$el),this._list.clones.push(a),a},a}();a.PsyclePanel=h;var i=function(a){function b(b,c,d){a.call(this,b,c,d),this.$el.addClass("__psycle_panel_clone__")}return __extends(b,a),b}(h);a.PsyclePanelClone=i;var j=function(){function a(a){this.el=[],this.clones=[],this.length=0,this.$el=a;for(var c,d=0,e=a.length;e>d;d++)c=b(a[d]),this.add(c)}return a.prototype.add=function(a){var b=this.el.length,c=new h(a,b,this);return this.el.push(c),this.length+=1,this},a.prototype.remove=function(a,b){return"undefined"==typeof b&&(b=!0),b&&this.$el.eq(a).remove(),this.el.splice(a,1),this._renumbering(),this.length-=1,this},a.prototype.item=function(a){var b=this._getRealIndex(a);return this.el[b]},a.prototype.each=function(a){for(var b,c=0,d=this.el.length;d>c;c++)b=this.el[c],a.call(b,b.index,b)},a.prototype.show=function(){return this.$el.show(),this},a.prototype.hide=function(){return this.$el.hide(),this},a.prototype.removeClone=function(){for(var a=0,b=this.clones.length;b>a;a++)this.clones[a].$el.remove();return this.clones=[],this},a.prototype._getRealIndex=function(a){var b=this.el.length;a%=b;var c=0>a?b+a:a;return c},a.prototype._renumbering=function(){for(var a=0,b=this.el.length;b>a;a++)this.el[a].index=a;return b},a}();a.PsyclePanelList=j;var k=function(){function a(a){this.$el=a}return a}();a.PsycleContainer=k;var l=function(){function a(a){this.$el=a}return a}();a.PsycleStage=l;var m=function(a){function e(d,e){a.call(this),this.index=0,this.vector=1,this.isTransition=!1,this.isPaused=!1;var f={startIndex:0,transition:"slide",duration:600,easing:"swing",delay:3e3,auto:!0,cancel:!0,repeat:c.RETURN,container:">ul:eq(0)",panels:">li",cols:1,rows:1,offsetX:0,offsetY:0,innerFocus:!1,noFocus:!0,bindKeyboard:!1,showOnlyOnce:null,controller:null,marker:null,thumbnail:null,css3:!0,loopCloneLength:null,scenes:[]};this._config=b.extend(f,e),this.$el=d;var h=d,i=h.find(this._config.container),m=i.find(this._config.panels);this.stage=new l(h),this.container=new k(i),this.panels=new j(m),this.transition=g.transitions[this._config.transition],this.index=this._config.startIndex,this.length=this.panels.length,this.progressIndex=this.index,this._bind(),this._init(),this._silent(),this._config.auto&&this.play(),d.data("psyborg.Psycle",this)}return __extends(e,a),e.prototype.play=function(){var a=this,b=this.trigger("play");return b&&(this.timer=setTimeout(function(){a.next()},this._config.delay)),this},e.prototype.stop=function(){return clearTimeout(this.timer),this},e.prototype.gotoPanel=function(a){var b=this;return this.isTransition?this:(this.stop(),this.isPaused=!1,this.from=this.index,this.to=a,this.progressIndex=a,this._before(),this.isTransition=!0,this._fire(),this.animation.done(function(){b._done()}),this.animation.fail(function(){b._fail()}),this)},e.prototype.prev=function(){if(this.isTransition)return this;this.vector=-1;var a=this._optimizeCounter(this.index-1);return this.gotoPanel(a),this},e.prototype.next=function(){if(this.isTransition)return this;this.vector=1;var a=this._optimizeCounter(this.index+1);return this.gotoPanel(a),this},e.prototype._done=function(){this.index=this.to,this.isTransition=!1,this._after(),this._silent(),this._config.auto&&this.play()},e.prototype._fail=function(){this.stop(),this._cancel(),this.isPaused=!0},e.prototype._optimizeCounter=function(a){var b=this.length-1;switch(this._config.repeat){case c.LOOP:case c.RETURN:a=0>a?b+a%b+1:a,a=b>a?a:a%(b+1);break;default:a=0>a?0:a,a=b>a?a:b,(this._isMin(a)||this._isMax(a))&&this.stop()}return a},e.prototype._isMax=function(a){return a===this.length-1},e.prototype._isMin=function(a){return 0===a},e.prototype._bind=function(){var a,c=this,d=1200,e=!1;b(window).on("resize",function(){e||(e=!0,c._resizeStart()),clearTimeout(a),c._resize(),a=setTimeout(function(){c._resizeEnd(),e=!1},d)})},e.prototype._init=function(){this.transition.init.call(this),this.transition.reflow.call(this,{timing:d.INIT})},e.prototype._silent=function(){this.transition.silent.call(this),this.transition.reflow.call(this,{timing:d.TRANSITION_END})},e.prototype._before=function(){this.transition.before.call(this)},e.prototype._fire=function(){this.transition.fire.call(this)},e.prototype._cancel=function(){this.transition.cancel.call(this)},e.prototype._after=function(){this.transition.after.call(this)},e.prototype._resize=function(){this.transition.reflow.call(this,{timing:d.RESIZE})},e.prototype._resizeStart=function(){this.transition.reflow.call(this,{timing:d.RESIZE_START}),this.animation&&this.isTransition&&(this.animation.stop(),this.stop())},e.prototype._resizeEnd=function(){this.transition.reflow.call(this,{timing:d.RESIZE_END}),this.isPaused&&this.isTransition&&this.gotoPanel(this.to)},e}(a.EventDispacther);a.Psycle=m;var n=function(){function a(){}return a.posAbs=function(a,b,c){"undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=0),a.css({position:"absolute",top:b,left:c})},a.posBase=function(a){var b=a.css("position");(null==b||"static"===b||""===b)&&a.css({position:"relative"})},a.isOverflowHidden=function(a){return"hidden"===a.css("overflow").toLowerCase()},a}();a.PsyborgCSS=n,g.create({slide:{init:function(){n.posBase(this.stage.$el),n.posAbs(this.container.$el),n.posAbs(this.panels.$el);var a=this.panels.$el;a.data("originStyle",a.attr("style"))},reflow:function(){var a=this.panels.$el;a.attr("style",a.data("originStyle")),this.panelWidth=a.width(),a.width(this.panelWidth),this.stageWidth=this.stage.$el.width();var b=Math.floor((this.length+2)/2),c=-1*b;this.panels.removeClone();for(var d,e;b>=c;c++)d=this.panels.item(c+this.index),c>=0?(d.show(),d.$el.css({left:this.panelWidth*c})):(e=d.clone(),e.show(),e.$el.css({left:this.panelWidth*c}))},silent:function(){this.container.$el.css({left:0}),this.panels.hide()},before:function(){},fire:function(){this.animation=b.Animation(this.container.$el[0],{left:-1*this.panelWidth*this.vector},{duration:this._config.duration})},cancel:function(){},after:function(){}}}),b.fn.psycle=function(b){var c=new a.Psycle(this,b);return c.$el}}(psyborg||(psyborg={})),jQuery.fn.linkboxChart=function(){};