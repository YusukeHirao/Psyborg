/**
 * Psyborg.js - v0.1.0 r110
 * update: 2013-04-19
 * Author: Yusuke Hirao [http://www.yusukehirao.com]
 * Github: https://github.com/YusukeHirao/Psyborg
 * License: Licensed under the MIT License
 * Require: jQuery v1.9.1
 */

/* Included Libraries * -- ----- ----- ----- ----- ----- ----- *

+ iOS6-timers.js
	This library re-implements setTimeout, setInterval, clearTimeout, clearInterval for iOS6.
	iOS6 suffers from a bug that kills timers that are created while a page is scrolling.
	This library fixes that problem by recreating timers after scrolling finishes (with interval correction).
	This code is free to use by anyone (MIT, blabla).
	Author: rkorving@wizcorp.jp

+ Bez
	Bez v1.0.10-g5ae0136
	http://github.com/rdallasgray/bez

	A plugin to convert CSS3 cubic-bezier co-ordinates to jQuery-compatible easing functions

	With thanks to Nikolay Nemshilov for clarification on the cubic-bezier maths
	See http://st-on-it.blogspot.com/2011/05/calculating-cubic-bezier-function.html

	Copyright 2011 Robert Dallas Gray. All rights reserved.
	Provided under the FreeBSD license: https://github.com/rdallasgray/bez/blob/master/LICENSE.txt

 * ----- ----- ----- ----- ----- ----- ----- ----- ----- ----- */

(function(){var t,r,e,o,n,i,s,a,u,h,c,l,p,d,g,f,_,y,m,$,b,v,w,I,x,k,C,A,z,j,T,S,L,E,B,F,P,D,M,O,R,H,N,Q,W,q,G,X,U,V,Y,J,K,Z,tr,rr,er,or,nr,ir,sr,ar,ur,hr,cr,lr,pr,dr,gr,fr,_r,yr,mr,$r,br,vr,wr,Ir,xr,kr,Cr,Ar,zr,jr,Tr,Sr,Lr=[].slice;if(Tr=this,function(t){function r(r,e,o){function n(){a&&(a.apply(t,arguments),u||(delete e[i],a=null))}var i,a=o[0],u=r===s;return o[0]=n,i=r.apply(t,o),e[i]={args:o,created:Date.now(),cb:a,id:i},i}function e(r,e,o,n){function i(){a.cb&&(a.cb.apply(t,arguments),u||(delete o[n],a.cb=null))}var a=o[n];if(a){var u=r===s;if(e(a.id),!u){var h=a.args[1],c=Date.now()-a.created;0>c&&(c=0),h-=c,0>h&&(h=0),a.args[1]=h}a.args[0]=i,a.created=Date.now(),a.id=r.apply(t,a.args)}}if(/OS 6_0.+like 0S X/i.test(t.navigator.userAgent)){var o={},n={},i=t.setTimeout,s=t.setInterval,a=t.clearTimeout,u=t.clearInterval;t.setTimeout=function(){return r(i,o,arguments)},t.setInterval=function(){return r(s,n,arguments)},t.clearTimeout=function(t){var r=o[t];r&&(delete o[t],a(r.id))},t.clearInterval=function(t){var r=n[t];r&&(delete n[t],u(r.id))},t.addEventListener("scroll",function(){var t;for(t in o)e(i,a,o,t);for(t in n)e(s,u,n,t)})}}(Tr),jQuery.extend({bez:function(r){var e="bez_"+t.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof jQuery.easing[e]){var o=function(t,r){var e=[null,null],o=[null,null],n=[null,null],i=function(i,s){return n[s]=3*t[s],o[s]=3*(r[s]-t[s])-n[s],e[s]=1-n[s]-o[s],i*(n[s]+i*(o[s]+i*e[s]))},a=function(t){return n[0]+t*(2*o[0]+3*e[0]*t)},u=function(t){for(var r,e=t,o=0;14>++o&&(r=i(e,0)-t,!(.001>s.abs(r)));)e-=r/a(e);return e};return function(t){return i(u(t),1)}};jQuery.easing[e]=function(t,e,n,i,s){return i*o([r[0],r[1]],[r[2],r[3]])(e/s)+n}}return e}}),!this.jQuery)throw new ReferenceError("jQuery is not defind");a="Psyborg",c="0.1.0",A=this,s=A.Math,Cr=A.setTimeout,g=A.clearTimeout,kr=A.setInterval,d=A.clearInterval,rr=A.isNaN,t=A.jQuery,i=t.Deferred,o=t.Animation,n=t.Callbacks,Ir=t.noop,C=t.extend,l=t.ajax,xr=t.proxy,k=t.each,wr=t.map,z=t.grep,zr=t.trim,p=t.camelCase,f=t.contains,Sr=t.inArray,nr=t.isPlainObject,N=t.isEmptyObject,er=t.isNumeric,R=t.isArray,Q=t.isFunction,jr=A,I=jr.document,x=I.documentElement,e=t(jr),r=t(I),j=function(t){return void 0===t},T=j(jr.addEventListener),S=j(x.style.posTop),cr=!j(jr.ontouchstart)||!!jr.navigator.msPointerEnabled,W=!!I.uniqueID,_r=T&&j(x.style.maxHeight),yr=T&&j(I.querySelectorAll),mr=T&&j(I.getElementsByClassName),$r=W&&j(jr.Worker),G=W&&_r,X=W&&yr&&!_r,U=W&&mr&&!yr,V=W&&$r&&!mr,q=W&&!$r,tr=!!jr.sidebar,or=!!jr.opera,lr=!(I.uniqueID||or||tr||!jr.localStorage),H=lr&&!j(I.webkitHidden),ir=lr&&!H&&!cr,br=ir&&j(jr.matchMedia),vr=ir&&j(jr.FileReader),sr=ir&&br,ar=ir&&vr&&!br,ur=ir&&!vr,J=cr&&q,Z=cr&&lr,Y=Z&&H,B=Z&&j(jr.EventSource),pr=B&&j(jr.onhashchange),dr=B&&j(jr.Blob),gr=B&&j(jr.FileReader),fr=B&&j(jr.ArrayBuffer),F=B&&pr,P=B&&dr&&!pr,D=B&&gr&&!dr,M=B&&fr&&!gr,O=B&&!fr,K=Z&&!B&&!Y,y=function(){return parseInt((new Date).valueOf()+Cr(Ir,0),10).valueOf().toString(16)},_=function(){var t,r;return t=arguments.length>=1?Lr.call(arguments,0):[],r=I.createElement("div"),r.className=t.join(" "),r},L=function(t,r){var e,o,n;for(o=0,n=t.length;n>o;o++)if(e=t[o],e===r)return!0;return!1},hr=function(t){return t===t+""},E=function(t){return parseInt(t,10)||0},v=function(){var t,r;return S?(t="top",r="px"):(t="posTop",r=0),function(e,o){return e[0].style[t]=o+r}}(),$=function(){var t,r;return S?(t="left",r="px"):(t="posLeft",r=0),function(e,o){return e[0].style[t]=o+r}}(),w=function(){var t,r;return S?(t="width",r="px"):(t="posWidth",r=0),function(e,o){return e[0].style[t]=o+r}}(),m=function(){var t,r;return S?(t="height",r="px"):(t="posHeight",r=0),function(e,o){return e[0].style[t]=o+r}}(),b=function(){return function(t,r){return mr?t[0].style.filter="filter:alpha(Opcity="+100*r+")":t[0].style.opacity=r}}(),Ar=function(){var t,r,e,o,n,i,s,a,u,h,c,l,p,d,g,f,y,m,$,b,v,w,I,x,k,C,A,z,j,T,S;for(p={},e=_().style,d=["Webkit","Moz","O","Ms",""],r=["Transform","Transition","Animation"],n=["TransitionEnd","AnimationStart","AnimationIteration","AnimationEnd"],l=["RequestAnimationFrame","CancelAnimationFrame","Performance"],S=r.concat(n,l),g=0,$=S.length;$>g;g++)a=S[g],p[a]=null;for(f=0,b=d.length;b>f;f++){for(c=d[f],y=0,v=r.length;v>y;y++)for(t=r[y],h=[c+t,c.toUpperCase()+t,c.toLowerCase()+t,c.toLowerCase()+t.toLowerCase()],m=0,w=h.length;w>m;m++)u=h[m],void 0!==e[u]&&(p[t]=u);for(A=0,I=n.length;I>A;A++)for(o=n[A],h=[c+o,c.toUpperCase()+o,c.toLowerCase()+o,c.toLowerCase()+o.toLowerCase()],i=z=0,x=h.length;x>z;i=++z)u=h[i],void 0!==jr["on"+u]&&(p[o]=u);for(j=0,k=l.length;k>j;j++)for(s=l[j],h=[c+s,c.toUpperCase()+s,c.toLowerCase()+s,c.toLowerCase()+s.toLowerCase()],T=0,C=h.length;C>T;T++)u=h[T],void 0!==jr[u]&&(p[s]=u)}return p.PerformanceNow=p.Performance&&Q(p.Performance.now),p}(),h=function(){function t(){throw new TypeError("object is not a function")}var r,e,o,n;return n=s.random,e=s.max,o=s.min,r=s.floor,t.random=function(t,i){var s,a,u,h,c;if(er(t))return er(i)||(i=t,t=0),h=o(t,i),u=e(t,i)+1,r(n()*(u-h)+h);if(R(t)){for(s=t,c=[];a=s.length;)c=c.concat(s.splice(this.random(a)));return c}return 0},t}(),u=function(){function r(e,o){var n,i,s,u,h,c,l,p,d,g,f;return this instanceof r?(g=y(),c=""+a+" _"+a+g,this.uid=g,this.$=t(e,o),this.setPropertiesByComputedValues(this.$),this._originWidth=this._width,this._originHeight=this._height,l="_"+a+"_core",this.$.addClass([c,l].join(" ")),this.$.css({position:"absolute",zIndex:1,width:"100%",height:"100%",background:"none"}),p="_"+a+"_container",i=t(_(c,p)),this.$.wrap(i),this.$ctn=this.$.parent(),this.$ctn.css({position:this._position,width:this._originWidth,height:this._originHeight}),f="_"+a+"_wrapper",u=t(_(c,f)),this.$ctn.wrapInner(u),this.$wrp=this.$ctn.children(),this.$wrp.css({position:"absolute",zIndex:0}),h="_"+a+"_background",n=t(_(c,h)),n.appendTo(this.$wrp),this.$bg=n,this.$bg.css({overflow:"hidden",position:"absolute",zIndex:0,width:"100%",height:"100%",backgroundPosition:"0 0",backgroundRepeat:"no-repeat",backgroundAttachment:"scroll",backgroundSize:"100% 100%"}),d="_"+a+"_hitarea",s=t(_(c,d)),s.insertBefore(this.$wrp),this.$hit=s,this.$hit.css({position:"absolute",zIndex:1}),this._$metrix=this.$wrp.add(this.$hit),this._$position=this.$ctn,this._$transform=this.$wrp.add(this.$hit),this.update(),void 0):new r(e,o)}var e,o,n;return n=function(t){var r;return r=t.css("position"),void 0===r||null===r||""===r||"static"===r?"relative":r},o=function(t){var r,e;return r=t.css("background-image"),e=r.replace(/^url\((?:"|')?(.+)(?:"|')?\)$/i,"$1")},e=function(t){var r,e,o,n,i,s,a,u,h,c;if(e=t.css("background-color"),0===e.indexOf("r")){for(u=e.replace(/\s+/gi,"").replace(/^rgba?\(([0-9,.%]+)\)/,"$1"),u=u.split(","),s=h=0,c=u.length;c>h;s=++h)o=u[s],u[s]=E(o);return 3===u.length&&u.push(1),u}return 0===e.indexOf("#")?(i=e.substring(1),3===i.length&&(i=i.replace(/^([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3")),a=i.substring(0,2),n=i.substring(2,4),r=i.substring(4,6),a=parseInt(a,16),n=parseInt(n,16),r=parseInt(r,16),[a,n,r,1]):void 0},r.prototype.uid=null,r.prototype.$=null,r.prototype.$ctn=null,r.prototype.$wrp=null,r.prototype.$bg=null,r.prototype.$hit=null,r.prototype._$metrix=null,r.prototype._$position=null,r.prototype._$transform=null,r.prototype._width=0,r.prototype._height=0,r.prototype._top=0,r.prototype._left=0,r.prototype._zIndex=0,r.prototype._zoom=1,r.prototype._opacity=1,r.prototype._x=0,r.prototype._y=0,r.prototype._rotate=0,r.prototype._scaleX=1,r.prototype._scaleY=1,r.prototype._colorR=0,r.prototype._colorG=0,r.prototype._colorB=0,r.prototype._colorA=0,r.prototype._backgroundImage=null,r.prototype._position=null,r.prototype._originWidth=0,r.prototype._originHeight=0,r.prototype.setPropertiesByComputedValues=function(t){var r;return this._width=t.width(),this._height=t.height(),this._top=E(t.css({position:"top"})),this._left=E(t.css({position:"left"})),this._zIndex=E(t.css("z-index")),this._zoom=E(t.css("zoom")),this._opacity=parseFloat(t.css("opacity")),this._backgroundImage=o(this.$),this._position=n(this.$),r=e(this.$),this._colorR=r[0],this._colorG=r[1],this._colorB=r[2],this._colorA=r[3],this},r.prototype.updateMetrix=function(){return this._$metrix.css({width:this._width,height:this._height})},r.prototype.updateFilter=function(){var t,r;return mr?(r=[],this._backgroundImage&&r.push('progid:DXImageTransform.Microsoft.AlphaImageLoader(Src="'+this._backgroundImage+'",SizingMethod=scale)'),1>=this._colorA?this.$bg.css({backgroundColor:"rgb("+this._colorR+", "+this._colorG+" ,"+this._colorB+")"}):this._colorA>=0?this.$bg.css({backgroundColor:"transparent"}):(t=["#",this._colorR.toString(16),this._colorG.toString(16),this._colorB.toString(16),(255*this._colorA).toString(16)].join(""),r.push("progid:DXImageTransform.Microsoft.gradient(startcolorstr="+t+", endcolorstr="+t+", gradienttype=0)")),this.$bg.css({fliter:r.join(" ")})):this.$bg.css({backgroundImage:"url("+this._backgroundImage+")"})},r.prototype.update=function(){return this.updateMetrix(),this._$position.css({top:this._top,left:this._left,zIndex:this._zIndex,zoom:this._zoom}),this._$transform,this},r.prototype.width=function(t,r){var e;return null==t?this._width:(e=parseFloat(t),r&&(e+=this.width()),this._width=e,this.update(),this)},r.prototype.height=function(t,r){var e;return null==t?this._height:(e=parseFloat(t),r&&(e+=this.height()),this._height=e,this.update(),this)},r.prototype.x=function(t,r){var e;return null==t?this._x:(e=parseFloat(t),r&&(e+=this.x()),this._x=e,this.update(),this)},r.prototype.trace=function(){return this.$.css({backgroundColor:"rgba(  0, 255,   0, 0.2)"}),this.$ctn.css({backgroundColor:"rgba(  0,   0, 255, 0.2)"}),this.$hit.css({backgroundColor:"rgba(255,   0,   0, 0.2)"}),this},r}(),t[a]=u}).call(this);