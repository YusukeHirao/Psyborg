/**
 * Psyborg.js - v0.1.0 r187
 * update: 2013-04-20
 * Author: Yusuke Hirao [http://www.yusukehirao.com]
 * Github: https://github.com/YusukeHirao/Psyborg
 * License: Licensed under the MIT License
 * Require: jQuery v1.9.1
 */

/* Included Libraries * -- ----- ----- ----- ----- ----- ----- *

+ iOS6-timers.js
	This library re-implements setTimeout, setInterval, clearTimeout, clearInterval for iOS6.
	iOS6 suffers from a bug that kills timers that are created while a page is scrolling.
	This library fixes that problem by recreating timers after scrolling finishes (with interval correction).
	This code is free to use by anyone (MIT, blabla).
	Author: rkorving@wizcorp.jp

+ Bez
	Bez v1.0.10-g5ae0136
	http://github.com/rdallasgray/bez

	A plugin to convert CSS3 cubic-bezier co-ordinates to jQuery-compatible easing functions

	With thanks to Nikolay Nemshilov for clarification on the cubic-bezier maths
	See http://st-on-it.blogspot.com/2011/05/calculating-cubic-bezier-function.html

	Copyright 2011 Robert Dallas Gray. All rights reserved.
	Provided under the FreeBSD license: https://github.com/rdallasgray/bez/blob/master/LICENSE.txt

 * ----- ----- ----- ----- ----- ----- ----- ----- ----- ----- */

(function(){var t,o,r,e,i,n,s,a,h,p,c,u,l,d,f,g,_,y,m,$,b,v,w,I,x,k,C,A,z,T,j,M,S,B,D,L,P,E,O,F,R,X,W,H,N,Q,G,q,Y,U,V,J,K,Z,to,oo,ro,eo,io,no,so,ao,ho,po,co,uo,lo,fo,go,_o,yo,mo,$o,bo,vo,wo,Io,xo,ko,Co,Ao,zo,To,jo,Mo,So,Bo=[].slice;if(Mo=this,function(t){function o(o,r,e){function i(){a&&(a.apply(t,arguments),h||(delete r[n],a=null))}var n,a=e[0],h=o===s;return e[0]=i,n=o.apply(t,e),r[n]={args:e,created:Date.now(),cb:a,id:n},n}function r(o,r,e,i){function n(){a.cb&&(a.cb.apply(t,arguments),h||(delete e[i],a.cb=null))}var a=e[i];if(a){var h=o===s;if(r(a.id),!h){var p=a.args[1],c=Date.now()-a.created;0>c&&(c=0),p-=c,0>p&&(p=0),a.args[1]=p}a.args[0]=n,a.created=Date.now(),a.id=o.apply(t,a.args)}}if(/OS 6_0.+like 0S X/i.test(t.navigator.userAgent)){var e={},i={},n=t.setTimeout,s=t.setInterval,a=t.clearTimeout,h=t.clearInterval;t.setTimeout=function(){return o(n,e,arguments)},t.setInterval=function(){return o(s,i,arguments)},t.clearTimeout=function(t){var o=e[t];o&&(delete e[t],a(o.id))},t.clearInterval=function(t){var o=i[t];o&&(delete i[t],h(o.id))},t.addEventListener("scroll",function(){var t;for(t in e)r(n,a,e,t);for(t in i)r(s,h,i,t)})}}(Mo),jQuery.extend({bez:function(o){var r="bez_"+t.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof jQuery.easing[r]){var e=function(t,o){var r=[null,null],e=[null,null],i=[null,null],n=function(n,s){return i[s]=3*t[s],e[s]=3*(o[s]-t[s])-i[s],r[s]=1-i[s]-e[s],n*(i[s]+n*(e[s]+n*r[s]))},a=function(t){return i[0]+t*(2*e[0]+3*r[0]*t)},h=function(t){for(var o,r=t,e=0;14>++e&&(o=n(r,0)-t,!(.001>s.abs(o)));)r-=o/a(r);return r};return function(t){return n(h(t),1)}};jQuery.easing[r]=function(t,r,i,n,s){return n*e([o[0],o[1]],[o[2],o[3]])(r/s)+i}}return r}}),!this.jQuery)throw new ReferenceError("jQuery is not defind");a="Psyborg",c="0.1.0",A=this,s=A.Math,Ao=A.setTimeout,f=A.clearTimeout,Co=A.setInterval,d=A.clearInterval,oo=A.isNaN,t=A.jQuery,n=t.Deferred,e=t.Animation,i=t.Callbacks,xo=t.noop,C=t.extend,u=t.ajax,ko=t.proxy,k=t.each,Io=t.map,z=t.grep,To=t.trim,l=t.camelCase,g=t.contains,So=t.inArray,io=t.isPlainObject,W=t.isEmptyObject,ro=t.isNumeric,R=t.isArray,H=t.isFunction,jo=A,I=jo.document,x=I.documentElement,r=t(jo),o=t(I),T=function(t){return void 0===t},j=T(jo.addEventListener),M=T(x.style.posTop),co=!T(jo.ontouchstart)||!!jo.navigator.msPointerEnabled,N=!!I.uniqueID,yo=j&&T(x.style.maxHeight),mo=j&&T(I.querySelectorAll),$o=j&&T(I.getElementsByClassName),bo=N&&T(jo.Worker),G=N&&yo,q=N&&mo&&!yo,Y=N&&$o&&!mo,U=N&&bo&&!$o,Q=N&&!bo,to=!!jo.sidebar,eo=!!jo.opera,uo=!(I.uniqueID||eo||to||!jo.localStorage),X=uo&&!T(I.webkitHidden),no=uo&&!X&&!co,vo=no&&T(jo.matchMedia),wo=no&&T(jo.FileReader),so=no&&vo,ao=no&&wo&&!vo,ho=no&&!wo,J=co&&Q,Z=co&&uo,V=Z&&X,D=Z&&T(jo.EventSource),lo=D&&T(jo.onhashchange),fo=D&&T(jo.Blob),go=D&&T(jo.FileReader),_o=D&&T(jo.ArrayBuffer),L=D&&lo,P=D&&fo&&!lo,E=D&&go&&!fo,O=D&&_o&&!go,F=D&&!_o,K=Z&&!D&&!V,y=function(){return parseInt((new Date).valueOf()+Ao(xo,0),10).valueOf().toString(16)},_=function(){var t,o;return t=arguments.length>=1?Bo.call(arguments,0):[],o=I.createElement("div"),o.className=t.join(" "),o},S=function(t,o){var r,e,i;for(e=0,i=t.length;i>e;e++)if(r=t[e],r===o)return!0;return!1},po=function(t){return t===t+""},B=function(t){return parseInt(t,10)||0},v=function(){var t,o;return M?(t="top",o="px"):(t="posTop",o=0),function(r,e){return r[0].style[t]=e+o}}(),$=function(){var t,o;return M?(t="left",o="px"):(t="posLeft",o=0),function(r,e){return r[0].style[t]=e+o}}(),w=function(){var t,o;return M?(t="width",o="px"):(t="posWidth",o=0),function(r,e){return r[0].style[t]=e+o}}(),m=function(){var t,o;return M?(t="height",o="px"):(t="posHeight",o=0),function(r,e){return r[0].style[t]=e+o}}(),b=function(){return function(t,o){return $o?t[0].style.filter="filter:alpha(Opcity="+100*o+")":t[0].style.opacity=o}}(),zo=function(){var t,o,r,e,i,n,s,a,h,p,c,u,l,d,f,g,y,m,$,b,v,w,I,x,k,C,A,z,T,j,M;for(l={},r=_().style,d=["Webkit","Moz","O","Ms",""],o=["Transform","Transition","Animation"],i=["TransitionEnd","AnimationStart","AnimationIteration","AnimationEnd"],u=["RequestAnimationFrame","CancelAnimationFrame","Performance"],M=o.concat(i,u),f=0,$=M.length;$>f;f++)a=M[f],l[a]=null;for(g=0,b=d.length;b>g;g++){for(c=d[g],y=0,v=o.length;v>y;y++)for(t=o[y],p=[c+t,c.toUpperCase()+t,c.toLowerCase()+t,c.toLowerCase()+t.toLowerCase()],m=0,w=p.length;w>m;m++)h=p[m],void 0!==r[h]&&(l[t]=h);for(A=0,I=i.length;I>A;A++)for(e=i[A],p=[c+e,c.toUpperCase()+e,c.toLowerCase()+e,c.toLowerCase()+e.toLowerCase()],n=z=0,x=p.length;x>z;n=++z)h=p[n],void 0!==jo["on"+h]&&(l[e]=h);for(T=0,k=u.length;k>T;T++)for(s=u[T],p=[c+s,c.toUpperCase()+s,c.toLowerCase()+s,c.toLowerCase()+s.toLowerCase()],j=0,C=p.length;C>j;j++)h=p[j],void 0!==jo[h]&&(l[s]=h)}return l.PerformanceNow=l.Performance&&H(l.Performance.now),l}(),p=function(){function t(){throw new TypeError("object is not a function")}var o,r,e,i;return i=s.random,r=s.max,e=s.min,o=s.floor,t.random=function(t,n){var s,a,h,p,c;if(ro(t))return ro(n)||(n=t,t=0),p=e(t,n),h=r(t,n)+1,o(i()*(h-p)+p);if(R(t)){for(s=t,c=[];a=s.length;)c=c.concat(s.splice(this.random(a)));return c}return 0},t}(),h=function(){function o(r,e){var i,n,s,h,p,c,u,l,d,f,g;return this instanceof o?(f=y(),c=""+a+" _"+a+f,this.uid=f,this.$=t(r,e),this.setPropertiesByComputedValues(this.$),this._originWidth=this._width,this._originHeight=this._height,u="_"+a+"_core",this.$.addClass([c,u].join(" ")),this.$.css({position:"absolute",zIndex:1,background:"none"}),l="_"+a+"_container",n=t(_(c,l)),this.$.wrap(n),this.$ctn=this.$.parent(),this.$ctn.css({position:this._position,width:this._originWidth,height:this._originHeight}),g="_"+a+"_wrapper",h=t(_(c,g)),this.$ctn.wrapInner(h),this.$wrp=this.$ctn.children(),this.$wrp.css({position:"absolute",zIndex:0}),p="_"+a+"_background",i=t(_(c,p)),i.appendTo(this.$wrp),this.$bg=i,this.$bg.css({overflow:"hidden",position:"absolute",zIndex:0,backgroundPosition:"0 0",backgroundRepeat:"no-repeat",backgroundAttachment:"scroll",backgroundSize:"100% 100%"}),d="_"+a+"_hitarea",s=t(_(c,d)),s.insertBefore(this.$wrp),this.$hit=s,this.$hit.css({position:"absolute",zIndex:1}),this._$demension=this.$wrp.add(this.$hit).add(this.$).add(this.$bg),this._$position=this.$ctn,this._$transform=this.$wrp.add(this.$hit),this.update(),void 0):new o(r,e)}var r,e,i;return i=function(t){var o;return o=t.css("position"),void 0===o||null===o||""===o||"static"===o?"relative":o},e=function(t){var o,r;return o=t.css("background-image"),r=o.replace(/^url\("?([^"]+)"?\)$/i,"$1")},r=function(t){var o,r,e,i,n,s,a,h,p,c;if(r=t.css("background-color"),0===r.indexOf("r")){for(h=r.replace(/\s+/gi,"").replace(/^rgba?\(([0-9,.%]+)\)/,"$1"),h=h.split(","),s=p=0,c=h.length;c>p;s=++p)e=h[s],h[s]=B(e);return 3===h.length&&h.push(1),h}return 0===r.indexOf("#")?(n=r.substring(1),3===n.length&&(n=n.replace(/^([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3")),a=n.substring(0,2),i=n.substring(2,4),o=n.substring(4,6),a=parseInt(a,16),i=parseInt(i,16),o=parseInt(o,16),[a,i,o,1]):[0,0,0,0]},o.prototype.uid=null,o.prototype.$=null,o.prototype.$ctn=null,o.prototype.$wrp=null,o.prototype.$bg=null,o.prototype.$hit=null,o.prototype._$demension=null,o.prototype._$position=null,o.prototype._$transform=null,o.prototype._width=0,o.prototype._height=0,o.prototype._top=0,o.prototype._left=0,o.prototype._zIndex=0,o.prototype._zoom=1,o.prototype._opacity=1,o.prototype._x=0,o.prototype._y=0,o.prototype._rotate=0,o.prototype._scaleX=1,o.prototype._scaleY=1,o.prototype._skewX=0,o.prototype._skewY=0,o.prototype._colorR=0,o.prototype._colorG=0,o.prototype._colorB=0,o.prototype._colorA=0,o.prototype._backgroundImage=null,o.prototype._position=null,o.prototype._originWidth=0,o.prototype._originHeight=0,o.prototype.setPropertiesByComputedValues=function(t){var o;return this._width=t.width(),this._height=t.height(),this._top=B(t.css({position:"top"})),this._left=B(t.css({position:"left"})),this._zIndex=B(t.css("z-index")),this._zoom=B(t.css("zoom")),this._opacity=parseFloat(t.css("opacity")),this._backgroundImage=e(this.$),this._position=i(this.$),o=r(this.$),this._colorR=o[0],this._colorG=o[1],this._colorB=o[2],this._colorA=o[3],this},o.prototype.updateDemension=function(){var t;return t=this,this._$demension.each(function(){return void 0!==this.style.posWidth?(this.style.posWidth=t._width,this.style.posHeight=t._height):(this.style.width=t._width+"px",this.style.height=t._height+"px")}),this},o.prototype.updateTransform=function(){var t,o,r,e,i,n,a,h,p,c;return c=[1,0,this._x,0,1,this._y,0,0,1],a=[this._scaleX,0,0,0,this._scaleY,0,0,0,1],i=this._rotate*s.PI/180,n=[s.cos(i),-s.sin(red),0,s.sin(i),s.cos(i),0,0,0,1],h=[1,s.tan(this._skewX*s.PI/180),0,0,1,0,0,0,1],p=[1,0,0,s.tan(this._skewY*s.PI/180),1,0,0,0,1],t=1,o=0,r=0,e=1,$o?this._$transform.css({filter:"progid:DXImageTransform.Microsoft.Matrix(\n	M11="+t+",\n	M12="+o+",\n	M21="+r+",\n	M22="+e+",\n	FilterType = 'bilinear',\n	SizingMethod='auto expand'\n)",top:this._y,left:this._x}):this._$transform.css({transform:"matrix(\n	"+t+", "+o+",\n	"+r+", "+e+",\n	"+this._x+",\n	"+this._y+"\n)"}),this},o.prototype.updateOpacity=function(){var t;return $o?(t=this._opacity)>0&&1>t&&this.$wrp.css({filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*this._opacity+")"}):this.$wrp.css({opacity:this._opacity}),this},o.prototype.updateBackground=function(){var t,o;return $o?(o=[],this._colorA>=1?this.$bg.css({backgroundColor:"rgb("+this._colorR+", "+this._colorG+", "+this._colorB+")"}):0>=this._colorA?this.$bg.css({backgroundColor:"transparent"}):(t=["#",(255*this._colorA).toString(16),this._colorR.toString(16),this._colorG.toString(16),this._colorB.toString(16)].join(""),o.push("progid:DXImageTransform.Microsoft.gradient(startcolorstr="+t+", endcolorstr="+t+", gradienttype=0)")),this._backgroundImage&&o.push("progid:DXImageTransform.Microsoft.AlphaImageLoader(Src="+this._backgroundImage+",SizingMethod=scale)"),this.$bg.css({filter:o.join(" ")})):this.$bg.css({backgroundImage:"url("+this._backgroundImage+")",backgroundColor:"rgba("+this._colorR+", "+this._colorG+", "+this._colorB+", "+this._colorA+")"}),this},o.prototype.update=function(){return this.updateDemension(),this.updateBackground(),this.updateOpacity(),this.updateTransform(),this._$position.css({top:this._top,left:this._left,zIndex:this._zIndex,zoom:this._zoom}),this._$transform,this},o.prototype.width=function(t,o){var r;return null==t?this._width:(r=parseFloat(t),o&&(r+=this.width()),this._width=r,this.update(),this)},o.prototype.height=function(t,o){var r;return null==t?this._height:(r=parseFloat(t),o&&(r+=this.height()),this._height=r,this.update(),this)},o.prototype.opacity=function(t,o){var r;return null==t?this._opacity:(r=parseFloat(t),o&&(r+=this.opacity()),this._opacity=r,this.update(),this)},o.prototype.x=function(t,o){var r;return null==t?this._x:(r=parseFloat(t),o&&(r+=this.x()),this._x=r,this.update(),this)},o.prototype.trace=function(){return this.$.css({backgroundColor:"rgba(  0, 255,   0, 0.2)"}),this.$ctn.css({backgroundColor:"rgba(  0,   0, 255, 0.2)"}),this.$hit.css({backgroundColor:"rgba(255,   0,   0, 0.2)"}),this},o}(),t[a]=h}).call(this);