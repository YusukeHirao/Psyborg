/**
 * Psyborg.js - v0.1.0 r199
 * update: 2013-04-20
 * Author: Yusuke Hirao [http://www.yusukehirao.com]
 * Github: https://github.com/YusukeHirao/Psyborg
 * License: Licensed under the MIT License
 * Require: jQuery v1.9.1
 */

/* Included Libraries * -- ----- ----- ----- ----- ----- ----- *

+ iOS6-timers.js
	This library re-implements setTimeout, setInterval, clearTimeout, clearInterval for iOS6.
	iOS6 suffers from a bug that kills timers that are created while a page is scrolling.
	This library fixes that problem by recreating timers after scrolling finishes (with interval correction).
	This code is free to use by anyone (MIT, blabla).
	Author: rkorving@wizcorp.jp

+ Bez
	Bez v1.0.10-g5ae0136
	http://github.com/rdallasgray/bez

	A plugin to convert CSS3 cubic-bezier co-ordinates to jQuery-compatible easing functions

	With thanks to Nikolay Nemshilov for clarification on the cubic-bezier maths
	See http://st-on-it.blogspot.com/2011/05/calculating-cubic-bezier-function.html

	Copyright 2011 Robert Dallas Gray. All rights reserved.
	Provided under the FreeBSD license: https://github.com/rdallasgray/bez/blob/master/LICENSE.txt

 * ----- ----- ----- ----- ----- ----- ----- ----- ----- ----- */

(function(){var t,r,e,o,i,n,s,a,h,u,p,c,l,d,f,g,_,y,m,v,$,b,w,k,I,x,C,A,z,T,F,X,j,M,S,B,D,L,P,E,O,Y,R,W,H,N,Q,G,q,U,V,J,K,Z,tr,rr,er,or,ir,nr,sr,ar,hr,ur,pr,cr,lr,dr,fr,gr,_r,yr,mr,vr,$r,br,wr,kr,Ir,xr,Cr,Ar,zr,Tr,Fr,Xr,jr=[].slice;if(Fr=this,function(t){function r(r,e,o){function i(){a&&(a.apply(t,arguments),h||(delete e[n],a=null))}var n,a=o[0],h=r===s;return o[0]=i,n=r.apply(t,o),e[n]={args:o,created:Date.now(),cb:a,id:n},n}function e(r,e,o,i){function n(){a.cb&&(a.cb.apply(t,arguments),h||(delete o[i],a.cb=null))}var a=o[i];if(a){var h=r===s;if(e(a.id),!h){var u=a.args[1],p=Date.now()-a.created;0>p&&(p=0),u-=p,0>u&&(u=0),a.args[1]=u}a.args[0]=n,a.created=Date.now(),a.id=r.apply(t,a.args)}}if(/OS 6_0.+like 0S X/i.test(t.navigator.userAgent)){var o={},i={},n=t.setTimeout,s=t.setInterval,a=t.clearTimeout,h=t.clearInterval;t.setTimeout=function(){return r(n,o,arguments)},t.setInterval=function(){return r(s,i,arguments)},t.clearTimeout=function(t){var r=o[t];r&&(delete o[t],a(r.id))},t.clearInterval=function(t){var r=i[t];r&&(delete i[t],h(r.id))},t.addEventListener("scroll",function(){var t;for(t in o)e(n,a,o,t);for(t in i)e(s,h,i,t)})}}(Fr),jQuery.extend({bez:function(r){var e="bez_"+t.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof jQuery.easing[e]){var o=function(t,r){var e=[null,null],o=[null,null],i=[null,null],n=function(n,s){return i[s]=3*t[s],o[s]=3*(r[s]-t[s])-i[s],e[s]=1-i[s]-o[s],n*(i[s]+n*(o[s]+n*e[s]))},a=function(t){return i[0]+t*(2*o[0]+3*e[0]*t)},h=function(t){for(var r,e=t,o=0;14>++o&&(r=n(e,0)-t,!(.001>s.abs(r)));)e-=r/a(e);return e};return function(t){return n(h(t),1)}};jQuery.easing[e]=function(t,e,i,n,s){return n*o([r[0],r[1]],[r[2],r[3]])(e/s)+i}}return e}}),!this.jQuery)throw new ReferenceError("jQuery is not defind");a="Psyborg",p="0.1.0",A=this,s=A.Math,Cr=A.setTimeout,f=A.clearTimeout,xr=A.setInterval,d=A.clearInterval,rr=A.isNaN,t=A.jQuery,n=t.Deferred,o=t.Animation,i=t.Callbacks,kr=t.noop,C=t.extend,c=t.ajax,Ir=t.proxy,x=t.each,wr=t.map,z=t.grep,zr=t.trim,l=t.camelCase,g=t.contains,Xr=t.inArray,ir=t.isPlainObject,R=t.isEmptyObject,er=t.isNumeric,O=t.isArray,W=t.isFunction,Tr=A,k=Tr.document,I=k.documentElement,e=t(Tr),r=t(k),T=function(t){return void 0===t},F=T(Tr.addEventListener),X=T(I.style.posTop),pr=!T(Tr.ontouchstart)||!!Tr.navigator.msPointerEnabled,H=!!k.uniqueID,_r=F&&T(I.style.maxHeight),yr=F&&T(k.querySelectorAll),mr=F&&T(k.getElementsByClassName),vr=H&&T(Tr.Worker),Q=H&&_r,G=H&&yr&&!_r,q=H&&mr&&!yr,U=H&&vr&&!mr,N=H&&!vr,tr=!!Tr.sidebar,or=!!Tr.opera,cr=!(k.uniqueID||or||tr||!Tr.localStorage),Y=cr&&!T(k.webkitHidden),nr=cr&&!Y&&!pr,$r=nr&&T(Tr.matchMedia),br=nr&&T(Tr.FileReader),sr=nr&&$r,ar=nr&&br&&!$r,hr=nr&&!br,J=pr&&N,Z=pr&&cr,V=Z&&Y,S=Z&&T(Tr.EventSource),lr=S&&T(Tr.onhashchange),dr=S&&T(Tr.Blob),fr=S&&T(Tr.FileReader),gr=S&&T(Tr.ArrayBuffer),B=S&&lr,D=S&&dr&&!lr,L=S&&fr&&!dr,P=S&&gr&&!fr,E=S&&!gr,K=Z&&!S&&!V,y=function(){return parseInt((new Date).valueOf()+Cr(kr,0),10).valueOf().toString(16)},_=function(){var t,r;return t=arguments.length>=1?jr.call(arguments,0):[],r=k.createElement("div"),r.className=t.join(" "),r},j=function(t,r){var e,o,i;for(o=0,i=t.length;i>o;o++)if(e=t[o],e===r)return!0;return!1},ur=function(t){return t===t+""},M=function(t){return parseInt(t,10)||0},b=function(){var t,r;return X?(t="top",r="px"):(t="posTop",r=0),function(e,o){return e[0].style[t]=o+r}}(),v=function(){var t,r;return X?(t="left",r="px"):(t="posLeft",r=0),function(e,o){return e[0].style[t]=o+r}}(),w=function(){var t,r;return X?(t="width",r="px"):(t="posWidth",r=0),function(e,o){return e[0].style[t]=o+r}}(),m=function(){var t,r;return X?(t="height",r="px"):(t="posHeight",r=0),function(e,o){return e[0].style[t]=o+r}}(),$=function(){return function(t,r){return mr?t[0].style.filter="filter:alpha(Opcity="+100*r+")":t[0].style.opacity=r}}(),Ar=function(){var t,r,e,o,i,n,s,a,h,u,p,c,l,d,f,g,y,m,v,$,b,w,k,I,x,C,A,z,T,F,X;for(l={},e=_().style,d=["Webkit","Moz","O","Ms",""],r=["Transform","Transition","Animation"],i=["TransitionEnd","AnimationStart","AnimationIteration","AnimationEnd"],c=["RequestAnimationFrame","CancelAnimationFrame","Performance"],X=r.concat(i,c),f=0,v=X.length;v>f;f++)a=X[f],l[a]=null;for(g=0,$=d.length;$>g;g++){for(p=d[g],y=0,b=r.length;b>y;y++)for(t=r[y],u=[p+t,p.toUpperCase()+t,p.toLowerCase()+t,p.toLowerCase()+t.toLowerCase()],m=0,w=u.length;w>m;m++)h=u[m],void 0!==e[h]&&(l[t]=h);for(A=0,k=i.length;k>A;A++)for(o=i[A],u=[p+o,p.toUpperCase()+o,p.toLowerCase()+o,p.toLowerCase()+o.toLowerCase()],n=z=0,I=u.length;I>z;n=++z)h=u[n],void 0!==Tr["on"+h]&&(l[o]=h);for(T=0,x=c.length;x>T;T++)for(s=c[T],u=[p+s,p.toUpperCase()+s,p.toLowerCase()+s,p.toLowerCase()+s.toLowerCase()],F=0,C=u.length;C>F;F++)h=u[F],void 0!==Tr[h]&&(l[s]=h)}return l.PerformanceNow=l.Performance&&W(l.Performance.now),l}(),u=function(){function t(){throw new TypeError("object is not a function")}var r,e,o,i;return i=s.random,e=s.max,o=s.min,r=s.floor,t.random=function(t,n){var s,a,h,u,p;if(er(t))return er(n)||(n=t,t=0),u=o(t,n),h=e(t,n)+1,r(i()*(h-u)+u);if(O(t)){for(s=t,p=[];a=s.length;)p=p.concat(s.splice(this.random(a)));return p}return 0},t}(),h=function(){function r(e,o){var i,n,s,h,u,p,c,l,d,f,g;return this instanceof r?(f=y(),p=""+a+" _"+a+f,this.uid=f,this.$=t(e,o),this.setPropertiesByComputedValues(this.$),this._originWidth=this._width,this._originHeight=this._height,c="_"+a+"_core",this.$.addClass([p,c].join(" ")),this.$.css({position:"absolute",zIndex:1,background:"none"}),l="_"+a+"_container",n=t(_(p,l)),this.$.wrap(n),this.$ctn=this.$.parent(),this.$ctn.css({position:this._position,width:this._originWidth,height:this._originHeight}),g="_"+a+"_wrapper",h=t(_(p,g)),this.$ctn.wrapInner(h),this.$wrp=this.$ctn.children(),this.$wrp.css({position:"absolute",zIndex:0}),u="_"+a+"_background",i=t(_(p,u)),i.appendTo(this.$wrp),this.$bg=i,this.$bg.css({overflow:"hidden",position:"absolute",zIndex:0,backgroundPosition:"0 0",backgroundRepeat:"no-repeat",backgroundAttachment:"scroll",backgroundSize:"100% 100%"}),d="_"+a+"_hitarea",s=t(_(p,d)),s.insertBefore(this.$wrp),this.$hit=s,this.$hit.css({position:"absolute",zIndex:1}),this._$demension=this.$wrp.add(this.$hit).add(this.$).add(this.$bg),this._$position=this.$ctn,this._$transform=this.$wrp.add(this.$hit),this.update(),void 0):new r(e,o)}var e,o,i,n;return i=function(t){var r;return r=t.css("position"),void 0===r||null===r||""===r||"static"===r?"relative":r},o=function(t){var r,e;return r=t.css("background-image"),e=r.replace(/^url\("?([^"]+)"?\)$/i,"$1")},e=function(t){var r,e,o,i,n,s,a,h,u,p;if(e=t.css("background-color"),0===e.indexOf("r")){for(h=e.replace(/\s+/gi,"").replace(/^rgba?\(([0-9,.%]+)\)/,"$1"),h=h.split(","),s=u=0,p=h.length;p>u;s=++u)o=h[s],h[s]=M(o);return 3===h.length&&h.push(1),h}return 0===e.indexOf("#")?(n=e.substring(1),3===n.length&&(n=n.replace(/^([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3")),a=n.substring(0,2),i=n.substring(2,4),r=n.substring(4,6),a=parseInt(a,16),i=parseInt(i,16),r=parseInt(r,16),[a,i,r,1]):[0,0,0,0]},n=function(){var t,r,e,o,i,n;for(r=arguments.length>=1?jr.call(arguments,0):[],o=[1,1,1,1,1,1,1,1,1],e=function(t,r){return[t[0]*r[0],t[3]*r[1],t[6]*r[2],t[1]*r[3],t[4]*r[4],t[7]*r[5],t[2]*r[6],t[5]*r[7],t[8]*r[8]]},i=0,n=r.length;n>i;i++)t=r[i],o=e(t,o);return o},r.prototype.uid=null,r.prototype.$=null,r.prototype.$ctn=null,r.prototype.$wrp=null,r.prototype.$bg=null,r.prototype.$hit=null,r.prototype._$demension=null,r.prototype._$position=null,r.prototype._$transform=null,r.prototype._width=0,r.prototype._height=0,r.prototype._top=0,r.prototype._left=0,r.prototype._zIndex=0,r.prototype._zoom=1,r.prototype._opacity=1,r.prototype._x=0,r.prototype._y=0,r.prototype._rotate=0,r.prototype._scaleX=1,r.prototype._scaleY=1,r.prototype._skewX=0,r.prototype._skewY=0,r.prototype._colorR=0,r.prototype._colorG=0,r.prototype._colorB=0,r.prototype._colorA=0,r.prototype._backgroundImage=null,r.prototype._position=null,r.prototype._originWidth=0,r.prototype._originHeight=0,r.prototype.setPropertiesByComputedValues=function(t){var r;return this._width=t.width(),this._height=t.height(),this._top=M(t.css({position:"top"})),this._left=M(t.css({position:"left"})),this._zIndex=M(t.css("z-index")),this._zoom=M(t.css("zoom")),this._opacity=parseFloat(t.css("opacity")),this._backgroundImage=o(this.$),this._position=i(this.$),r=e(this.$),this._colorR=r[0],this._colorG=r[1],this._colorB=r[2],this._colorA=r[3],this},r.prototype.updateDemension=function(){var t;return t=this,this._$demension.each(function(){return void 0!==this.style.posWidth?(this.style.posWidth=t._width,this.style.posHeight=t._height):(this.style.width=t._width+"px",this.style.height=t._height+"px")}),this},r.prototype.updateTransform=function(){var t,r,e,o,i,a,h,u,p,c,l;return l=[1,0,this._x,0,1,this._y,0,0,1],u=[this._scaleX,0,0,0,this._scaleY,0,0,0,1],a=this._rotate*s.PI/180,h=[s.cos(a),-s.sin(a),0,s.sin(a),s.cos(a),0,0,0,1],p=[1,s.tan(this._skewX*s.PI/180),0,s.tan(this._skewY*s.PI/180),1,0,0,0,1],c=[1,0,0,1,0,0,0,1],i=n(l,u,h,p),t=i[0],r=i[1],e=i[3],o=i[4],mr?this._$transform.css({filter:"progid:DXImageTransform.Microsoft.Matrix(\n	M11="+t+",\n	M12="+r+",\n	M21="+e+",\n	M22="+o+",\n	FilterType = 'bilinear',\n	SizingMethod='auto expand'\n)",top:this._y,left:this._x}):this._$transform.css({transform:"matrix(\n	"+t+", "+r+",\n	"+e+", "+o+",\n	"+this._x+",\n	"+this._y+"\n)"}),this},r.prototype.updateOpacity=function(){var t;return mr?(t=this._opacity)>0&&1>t&&this.$wrp.css({filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*this._opacity+")"}):this.$wrp.css({opacity:this._opacity}),this},r.prototype.updateBackground=function(){var t,r;return mr?(r=[],this._colorA>=1?this.$bg.css({backgroundColor:"rgb("+this._colorR+", "+this._colorG+", "+this._colorB+")"}):0>=this._colorA?this.$bg.css({backgroundColor:"transparent"}):(t=["#",(255*this._colorA).toString(16),this._colorR.toString(16),this._colorG.toString(16),this._colorB.toString(16)].join(""),r.push("progid:DXImageTransform.Microsoft.gradient(startcolorstr="+t+", endcolorstr="+t+", gradienttype=0)")),this._backgroundImage&&r.push("progid:DXImageTransform.Microsoft.AlphaImageLoader(Src="+this._backgroundImage+",SizingMethod=scale)"),this.$bg.css({filter:r.join(" ")})):this.$bg.css({backgroundImage:"url("+this._backgroundImage+")",backgroundColor:"rgba("+this._colorR+", "+this._colorG+", "+this._colorB+", "+this._colorA+")"}),this},r.prototype.update=function(){return this.updateDemension(),this.updateBackground(),this.updateOpacity(),this.updateTransform(),this._$position.css({top:this._top,left:this._left,zIndex:this._zIndex,zoom:this._zoom}),this._$transform,this},r.prototype.width=function(t,r){var e;return null==t?this._width:(e=parseFloat(t),r&&(e+=this.width()),this._width=e,this.update(),this)},r.prototype.height=function(t,r){var e;return null==t?this._height:(e=parseFloat(t),r&&(e+=this.height()),this._height=e,this.update(),this)},r.prototype.opacity=function(t,r){var e;return null==t?this._opacity:(e=parseFloat(t),r&&(e+=this.opacity()),this._opacity=e,this.update(),this)},r.prototype.x=function(t,r){var e;return null==t?this._x:(e=parseFloat(t),r&&(e+=this.x()),this._x=e,this.update(),this)},r.prototype.y=function(t,r){var e;return null==t?this._y:(e=parseFloat(t),r&&(e+=this.y()),this._y=e,this.update(),this)},r.prototype.scaleX=function(t,r){var e;return null==t?this._scaleX:(e=parseFloat(t),r&&(e+=this.scaleX()),this._scaleX=e,this.update(),this)},r.prototype.scaleY=function(t,r){var e;return null==t?this._scaleY:(e=parseFloat(t),r&&(e+=this.scaleY()),this._scaleY=e,this.update(),this)},r.prototype.rotate=function(t,r){var e;return null==t?this._rotate:(e=parseFloat(t),r&&(e+=this.rotate()),this._rotate=e,this.update(),this)},r.prototype.skewX=function(t,r){var e;return null==t?this._skewX:(e=parseFloat(t),r&&(e+=this.skewX()),this._skewX=e,this.update(),this)},r.prototype.skewY=function(t,r){var e;return null==t?this._skewY:(e=parseFloat(t),r&&(e+=this.skewY()),this._skewY=e,this.update(),this)},r.prototype.trace=function(){return this.$.css({backgroundColor:"rgba(  0, 255,   0, 0.2)"}),this.$ctn.css({backgroundColor:"rgba(  0,   0, 255, 0.2)"}),this.$hit.css({backgroundColor:"rgba(255,   0,   0, 0.2)"}),this},r}(),t[a]=h}).call(this);