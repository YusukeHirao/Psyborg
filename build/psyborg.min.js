/**
 * Psyborg.js - v0.1.0 r100
 * update: 2013-04-19
 * Author: Yusuke Hirao [http://www.yusukehirao.com]
 * Github: https://github.com/YusukeHirao/Psyborg
 * License: Licensed under the MIT License
 * Require: jQuery v1.9.1
 */

/* Included Libraries * -- ----- ----- ----- ----- ----- ----- *

+ iOS6-timers.js
	This library re-implements setTimeout, setInterval, clearTimeout, clearInterval for iOS6.
	iOS6 suffers from a bug that kills timers that are created while a page is scrolling.
	This library fixes that problem by recreating timers after scrolling finishes (with interval correction).
	This code is free to use by anyone (MIT, blabla).
	Author: rkorving@wizcorp.jp

+ Bez
	Bez v1.0.10-g5ae0136
	http://github.com/rdallasgray/bez

	A plugin to convert CSS3 cubic-bezier co-ordinates to jQuery-compatible easing functions

	With thanks to Nikolay Nemshilov for clarification on the cubic-bezier maths
	See http://st-on-it.blogspot.com/2011/05/calculating-cubic-bezier-function.html

	Copyright 2011 Robert Dallas Gray. All rights reserved.
	Provided under the FreeBSD license: https://github.com/rdallasgray/bez/blob/master/LICENSE.txt

 * ----- ----- ----- ----- ----- ----- ----- ----- ----- ----- */

(function(){var t,e,r,n,o,i,s,a,u,h,p,c,l,d,f,g,y,_,m,$,v,b,w,x,I,k,C,z,A,j,T,L,E,F,P,S,O,D,M,B,H,N,Q,R,W,q,U,X,V,G,Y,J,K,Z,te,ee,re,ne,oe,ie,se,ae,ue,he,pe,ce,le,de,fe,ge,ye,_e,me,$e,ve,be,we,xe,Ie,ke,Ce,ze,Ae,je,Te,Le,Ee=[].slice;if(Te=this,function(t){function e(e,r,n){function o(){a&&(a.apply(t,arguments),u||(delete r[i],a=null))}var i,a=n[0],u=e===s;return n[0]=o,i=e.apply(t,n),r[i]={args:n,created:Date.now(),cb:a,id:i},i}function r(e,r,n,o){function i(){a.cb&&(a.cb.apply(t,arguments),u||(delete n[o],a.cb=null))}var a=n[o];if(a){var u=e===s;if(r(a.id),!u){var h=a.args[1],p=Date.now()-a.created;0>p&&(p=0),h-=p,0>h&&(h=0),a.args[1]=h}a.args[0]=i,a.created=Date.now(),a.id=e.apply(t,a.args)}}if(/OS 6_0.+like 0S X/i.test(t.navigator.userAgent)){var n={},o={},i=t.setTimeout,s=t.setInterval,a=t.clearTimeout,u=t.clearInterval;t.setTimeout=function(){return e(i,n,arguments)},t.setInterval=function(){return e(s,o,arguments)},t.clearTimeout=function(t){var e=n[t];e&&(delete n[t],a(e.id))},t.clearInterval=function(t){var e=o[t];e&&(delete o[t],u(e.id))},t.addEventListener("scroll",function(){var t;for(t in n)r(i,a,n,t);for(t in o)r(s,u,o,t)})}}(Te),jQuery.extend({bez:function(e){var r="bez_"+t.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof jQuery.easing[r]){var n=function(t,e){var r=[null,null],n=[null,null],o=[null,null],i=function(i,s){return o[s]=3*t[s],n[s]=3*(e[s]-t[s])-o[s],r[s]=1-o[s]-n[s],i*(o[s]+i*(n[s]+i*r[s]))},a=function(t){return o[0]+t*(2*n[0]+3*r[0]*t)},u=function(t){for(var e,r=t,n=0;14>++n&&(e=i(r,0)-t,!(.001>s.abs(e)));)r-=e/a(r);return r};return function(t){return i(u(t),1)}};jQuery.easing[r]=function(t,r,o,i,s){return i*n([e[0],e[1]],[e[2],e[3]])(r/s)+o}}return r}}),!this.jQuery)throw new ReferenceError("jQuery is not defind");a="Psyborg",p="0.1.0",z=this,s=z.Math,Ce=z.setTimeout,f=z.clearTimeout,ke=z.setInterval,d=z.clearInterval,ee=z.isNaN,t=z.jQuery,i=t.Deferred,n=t.Animation,o=t.Callbacks,xe=t.noop,C=t.extend,c=t.ajax,Ie=t.proxy,k=t.each,we=t.map,A=t.grep,Ae=t.trim,l=t.camelCase,g=t.contains,Le=t.inArray,oe=t.isPlainObject,Q=t.isEmptyObject,re=t.isNumeric,H=t.isArray,R=t.isFunction,je=z,x=je.document,I=x.documentElement,r=t(je),e=t(x),j=function(t){return void 0===t},T=j(je.addEventListener),L=j(I.style.posTop),pe=!j(je.ontouchstart)||!!je.navigator.msPointerEnabled,W=!!x.uniqueID,ye=T&&j(I.style.maxHeight),_e=T&&j(x.querySelectorAll),me=T&&j(x.getElementsByClassName),$e=W&&j(je.Worker),U=W&&ye,X=W&&_e&&!ye,V=W&&me&&!_e,G=W&&$e&&!me,q=W&&!$e,te=!!je.sidebar,ne=!!je.opera,ce=!(x.uniqueID||ne||te||!je.localStorage),N=ce&&!j(x.webkitHidden),ie=ce&&!N&&!pe,ve=ie&&j(je.matchMedia),be=ie&&j(je.FileReader),se=ie&&ve,ae=ie&&be&&!ve,ue=ie&&!be,J=pe&&q,Z=pe&&ce,Y=Z&&N,P=Z&&j(je.EventSource),le=P&&j(je.onhashchange),de=P&&j(je.Blob),fe=P&&j(je.FileReader),ge=P&&j(je.ArrayBuffer),S=P&&le,O=P&&de&&!le,D=P&&fe&&!de,M=P&&ge&&!fe,B=P&&!ge,K=Z&&!P&&!Y,_=function(){return parseInt((new Date).valueOf()+Ce(xe,0),10).valueOf().toString(16)},y=function(){var t,e;return t=arguments.length>=1?Ee.call(arguments,0):[],e=x.createElement("div"),e.className=t.join(" "),e},E=function(t,e){var r,n,o;for(n=0,o=t.length;o>n;n++)if(r=t[n],r===e)return!0;return!1},he=function(t){return t===t+""},F=function(t){return parseInt(t,10)||0},b=function(){var t,e;return L?(t="top",e="px"):(t="posTop",e=0),function(r,n){return r[0].style[t]=n+e}}(),$=function(){var t,e;return L?(t="left",e="px"):(t="posLeft",e=0),function(r,n){return r[0].style[t]=n+e}}(),w=function(){var t,e;return L?(t="width",e="px"):(t="posWidth",e=0),function(r,n){return r[0].style[t]=n+e}}(),m=function(){var t,e;return L?(t="height",e="px"):(t="posHeight",e=0),function(r,n){return r[0].style[t]=n+e}}(),v=function(){return function(t,e){return me?t[0].style.filter="filter:alpha(Opcity="+100*e+")":t[0].style.opacity=e}}(),ze=function(){var t,e,r,n,o,i,s,a,u,h,p,c,l,d,f,g,_,m,$,v,b,w,x,I,k,C,z,A,j,T,L;for(l={},r=y().style,d=["Webkit","Moz","O","Ms",""],e=["Transform","Transition","Animation"],o=["TransitionEnd","AnimationStart","AnimationIteration","AnimationEnd"],c=["RequestAnimationFrame","CancelAnimationFrame","Performance"],L=e.concat(o,c),f=0,$=L.length;$>f;f++)a=L[f],l[a]=null;for(g=0,v=d.length;v>g;g++){for(p=d[g],_=0,b=e.length;b>_;_++)for(t=e[_],h=[p+t,p.toUpperCase()+t,p.toLowerCase()+t,p.toLowerCase()+t.toLowerCase()],m=0,w=h.length;w>m;m++)u=h[m],void 0!==r[u]&&(l[t]=u);for(z=0,x=o.length;x>z;z++)for(n=o[z],h=[p+n,p.toUpperCase()+n,p.toLowerCase()+n,p.toLowerCase()+n.toLowerCase()],i=A=0,I=h.length;I>A;i=++A)u=h[i],void 0!==je["on"+u]&&(l[n]=u);for(j=0,k=c.length;k>j;j++)for(s=c[j],h=[p+s,p.toUpperCase()+s,p.toLowerCase()+s,p.toLowerCase()+s.toLowerCase()],T=0,C=h.length;C>T;T++)u=h[T],void 0!==je[u]&&(l[s]=u)}return l.PerformanceNow=l.Performance&&R(l.Performance.now),l}(),h=function(){function t(){throw new TypeError("object is not a function")}var e,r,n,o;return o=s.random,r=s.max,n=s.min,e=s.floor,t.random=function(t,i){var s,a,u,h,p;if(re(t))return re(i)||(i=t,t=0),h=n(t,i),u=r(t,i)+1,e(o()*(u-h)+h);if(H(t)){for(s=t,p=[];a=s.length;)p=p.concat(s.splice(this.random(a)));return p}return 0},t}(),u=function(){function e(r,n){var o,i,s,u,h,p,c,l,d,f,g;return this instanceof e?(f=_(),p=""+a+" _"+a+f,this.uid=f,this.$=t(r,n),this.setPropertiesByComputedValues(this.$),this._originWidth=this._width,this._originHeight=this._height,c="_"+a+"_core",this.$.addClass([p,c].join(" ")),this.$.css({position:"absolute",zIndex:1,width:"100%",height:"100%",background:"none"}),l="_"+a+"_container",i=t(y(p,l)),this.$.wrap(i),this.$ctn=this.$.parent(),this.$ctn.css({position:this._position,width:this._originWidth,height:this._originHeight}),g="_"+a+"_wrapper",u=t(y(p,g)),this.$ctn.wrapInner(u),this.$wrp=this.$ctn.children(),this.$wrp.css({position:"absolute",zIndex:0}),h="_"+a+"_background",o=t(y(p,h)),o.appendTo(this.$wrp),this.$bg=o,this.$bg.css({overflow:"hidden",position:"absolute",zIndex:0,width:"100%",height:"100%",backgroundPosition:"0 0",backgroundRepeat:"no-repeat",backgroundAttachment:"scroll",backgroundSize:"100% 100%"}),d="_"+a+"_hitarea",s=t(y(p,d)),s.insertBefore(this.$wrp),this.$hit=s,this.$hit.css({position:"absolute",zIndex:1}),this._$metrix=this.$wrp.add(this.$hit),this._$position=this.$ctn,this._$transform=this.$wrp.add(this.$hit),this.update(),void 0):new e(r,n)}var r,n,o;return o=function(t){var e;return e=t.css("position"),void 0===e||null===e||""===e||"static"===e?"relative":e},n=function(t){var e,r;return e=t.css("background-image"),r=e.replace(/^url\((?:"|')?(.+)(?:"|')?\)$/i,"$1")},r=function(t){var e,r,n,o,i,s,a;if(e=t.css("background-color"),0===e.indexOf("r")){for(i=e.replace(/\s+/gi,"").replace(/^rgba?\(([0-9,.%]+)\)/,"$1"),i=i.split(","),o=s=0,a=i.length;a>s;o=++s)r=i[o],i[o]=F(r);return 3===i.length&&i.push(1),i}return 0===e.indexOf("#")?(n=e.substring(1),3===n.length&&(n=n.replace(/^([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3")),alert(n)):void 0},e.prototype.uid=null,e.prototype.$=null,e.prototype.$ctn=null,e.prototype.$wrp=null,e.prototype.$bg=null,e.prototype.$hit=null,e.prototype._$metrix=null,e.prototype._$position=null,e.prototype._$transform=null,e.prototype._width=0,e.prototype._height=0,e.prototype._top=0,e.prototype._left=0,e.prototype._zIndex=0,e.prototype._zoom=1,e.prototype._opacity=1,e.prototype._x=0,e.prototype._y=0,e.prototype._rotate=0,e.prototype._scaleX=1,e.prototype._scaleY=1,e.prototype._colorR=0,e.prototype._colorG=0,e.prototype._colorB=0,e.prototype._colorA=0,e.prototype._backgroundImage=null,e.prototype._position=null,e.prototype._originWidth=0,e.prototype._originHeight=0,e.prototype.setPropertiesByComputedValues=function(t){return this._width=t.width(),this._height=t.height(),this._top=F(t.css({position:"top"})),this._left=F(t.css({position:"left"})),this._zIndex=F(t.css("z-index")),this._zoom=F(t.css("zoom")),this._opacity=parseFloat(t.css("opacity")),this._backgroundImage=n(this.$),this._position=o(this.$),r(this.$),this},e.prototype.updateMetrix=function(){return this._$metrix.css({width:this._width,height:this._height})},e.prototype.updateFilter=function(){var t;return me?(t=[],this._backgroundImage&&t.push('progid:DXImageTransform.Microsoft.AlphaImageLoader(Src="'+this._backgroundImage+'",SizingMethod=scale)'),this.$bg.css({fliter:t.join(" ")})):this.$bg.css({backgroundImage:"url("+this._backgroundImage+")"})},e.prototype.update=function(){return this.updateMetrix(),this._$position.css({top:this._top,left:this._left,zIndex:this._zIndex,zoom:this._zoom}),this._$transform,this},e.prototype.width=function(t,e){var r;return null==t?this._width:(r=parseFloat(t),e&&(r+=this.width()),this._width=r,this.update(),this)},e.prototype.height=function(t,e){var r;return null==t?this._height:(r=parseFloat(t),e&&(r+=this.height()),this._height=r,this.update(),this)},e.prototype.x=function(t,e){var r;return null==t?this._x:(r=parseFloat(t),e&&(r+=this.x()),this._x=r,this.update(),this)},e.prototype.trace=function(){return this.$.css({backgroundColor:"rgba(  0, 255,   0, 0.2)"}),this.$ctn.css({backgroundColor:"rgba(  0,   0, 255, 0.2)"}),this.$hit.css({backgroundColor:"rgba(255,   0,   0, 0.2)"}),this},e}(),t[a]=u}).call(this);