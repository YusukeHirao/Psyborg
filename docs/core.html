<!DOCTYPE html>  <html> <head>   <title>core</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="Psyborg.class.html">                 Psyborg.class.coffee               </a>                                           <a class="source" href="Psyence.class.html">                 Psyence.class.coffee               </a>                                           <a class="source" href="core.html">                 core.coffee               </a>                                           <a class="source" href="extend.html">                 extend.coffee               </a>                                           <a class="source" href="include_libraries.html">                 include_libraries.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               core             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="s">&#39;use strict&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Library Check</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">unless</span> <span class="nx">@jQuery</span> <span class="k">then</span> <span class="k">throw</span> <span class="k">new</span> <span class="nx">ReferenceError</span> <span class="s">&#39;jQuery is not defind&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h2>Constants</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">NAMESPACE = </span><span class="s">&#39;Psyborg&#39;</span>
<span class="nv">VERSION = </span><span class="s">&#39;0.1.0&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h2>Alias</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">global = </span><span class="nx">@</span>
<span class="nb">Math</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nb">Math</span>
<span class="nv">setTimeout = </span><span class="nx">global</span><span class="p">.</span><span class="nx">setTimeout</span>
<span class="nv">clearTimeout = </span><span class="nx">global</span><span class="p">.</span><span class="nx">clearTimeout</span>
<span class="nv">setInterval = </span><span class="nx">global</span><span class="p">.</span><span class="nx">setInterval</span>
<span class="nv">clearInterval = </span><span class="nx">global</span><span class="p">.</span><span class="nx">clearInterval</span>
<span class="nb">isNaN</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nb">isNaN</span>
<span class="nv">$ = </span><span class="nx">global</span><span class="p">.</span><span class="nx">jQuery</span>
<span class="nv">Deferred = </span><span class="nx">$</span><span class="p">.</span><span class="nx">Deferred</span>
<span class="nv">Animation = </span><span class="nx">$</span><span class="p">.</span><span class="nx">Animation</span>
<span class="nv">Callbacks = </span><span class="nx">$</span><span class="p">.</span><span class="nx">Callbacks</span>
<span class="nv">noop = </span><span class="nx">$</span><span class="p">.</span><span class="nx">noop</span> <span class="c1"># 空関数</span>
<span class="nv">extend = </span><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span> <span class="c1"># プロパティマージ</span>
<span class="nv">ajax = </span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span> <span class="c1"># Ajax</span>
<span class="nv">proxy = </span><span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span> <span class="c1"># thisコンテキスト指定</span>
<span class="nv">each = </span><span class="nx">$</span><span class="p">.</span><span class="nx">each</span> <span class="c1"># 配列オブジェクトループ</span>
<span class="nv">map = </span><span class="nx">$</span><span class="p">.</span><span class="nx">map</span> <span class="c1"># 配列各要素処理(null/undefined除外)</span>
<span class="nv">grep = </span><span class="nx">$</span><span class="p">.</span><span class="nx">grep</span> <span class="c1"># 配列フィルタリング</span>
<span class="nv">trim = </span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span> <span class="c1"># 文字列トリム</span>
<span class="nv">camelCase = </span><span class="nx">$</span><span class="p">.</span><span class="nx">camelCase</span> <span class="c1"># キャメルケース化</span>
<span class="nv">contains = </span><span class="nx">$</span><span class="p">.</span><span class="nx">contains</span> <span class="c1"># DOM内包判定</span>
<span class="nv">_inArray = </span><span class="nx">$</span><span class="p">.</span><span class="nx">inArray</span> <span class="c1"># 配列インデックス検索</span>
<span class="nv">isPlainObject = </span><span class="nx">$</span><span class="p">.</span><span class="nx">isPlainObject</span>
<span class="nv">isEmptyObject = </span><span class="nx">$</span><span class="p">.</span><span class="nx">isEmptyObject</span>
<span class="nv">isNumeric = </span><span class="nx">$</span><span class="p">.</span><span class="nx">isNumeric</span>
<span class="nv">isArray = </span><span class="nx">$</span><span class="p">.</span><span class="nx">isArray</span>
<span class="nv">isFunction = </span><span class="nx">$</span><span class="p">.</span><span class="nx">isFunction</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <h2>DOM</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">w = </span><span class="nx">global</span>
<span class="nv">d = </span><span class="nx">w</span><span class="p">.</span><span class="nb">document</span>
<span class="nv">dE = </span><span class="nx">d</span><span class="p">.</span><span class="nx">documentElement</span>
<span class="nv">$w = </span><span class="nx">$</span> <span class="nx">w</span>
<span class="nv">$d = </span><span class="nx">$</span> <span class="nx">d</span>

<span class="nv">hasnt = </span><span class="nf">(property) -&gt;</span>
  <span class="k">return</span> <span class="nx">property</span> <span class="o">is</span> <span class="kc">undefined</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h2>Variables</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">hasntAddEventListener = </span><span class="nx">hasnt</span> <span class="nx">w</span><span class="p">.</span><span class="nx">addEventListener</span>
<span class="nv">hasntPosStyle = </span><span class="nx">hasnt</span> <span class="nx">dE</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">posTop</span>
<span class="nv">isTouchable = </span><span class="o">!</span><span class="nx">hasnt</span><span class="p">(</span><span class="nx">w</span><span class="p">.</span><span class="nx">ontouchstart</span><span class="p">)</span> <span class="o">||</span> <span class="o">!!</span><span class="nx">w</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">msPointerEnabled</span>
<span class="nv">isIE = </span><span class="o">!!</span><span class="nx">d</span><span class="p">.</span><span class="nx">uniqueID</span>
<span class="nv">ltIE6 = </span><span class="nx">hasntAddEventListener</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">dE</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">maxHeight</span>
<span class="nv">ltIE7 = </span><span class="nx">hasntAddEventListener</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">d</span><span class="p">.</span><span class="nx">querySelectorAll</span>
<span class="nv">ltIE8 = </span><span class="nx">hasntAddEventListener</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByClassName</span>
<span class="nv">ltIE9 = </span><span class="nx">isIE</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">w</span><span class="p">.</span><span class="nx">Worker</span>
<span class="nv">isIE6 = </span><span class="nx">isIE</span> <span class="o">&amp;&amp;</span> <span class="nx">ltIE6</span>
<span class="nv">isIE7 = </span><span class="nx">isIE</span> <span class="o">&amp;&amp;</span> <span class="nx">ltIE7</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltIE6</span>
<span class="nv">isIE8 = </span><span class="nx">isIE</span> <span class="o">&amp;&amp;</span> <span class="nx">ltIE8</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltIE7</span>
<span class="nv">isIE9 = </span><span class="nx">isIE</span> <span class="o">&amp;&amp;</span> <span class="nx">ltIE9</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltIE8</span>
<span class="nv">isIE10 = </span><span class="nx">isIE</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltIE9</span>
<span class="nv">isMoz = </span><span class="o">!!</span><span class="nx">w</span><span class="p">.</span><span class="nx">sidebar</span>
<span class="nv">isOpera = </span><span class="o">!!</span><span class="nx">w</span><span class="p">.</span><span class="nx">opera</span>
<span class="nv">isWebkit = </span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">uniqueID</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isOpera</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isMoz</span> <span class="o">&amp;&amp;</span> <span class="o">!!</span><span class="nx">w</span><span class="p">.</span><span class="nx">localStorage</span>
<span class="nv">isChrome = </span><span class="nx">isWebkit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hasnt</span> <span class="nx">d</span><span class="p">.</span><span class="nx">webkitHidden</span>
<span class="nv">isSafari = </span><span class="nx">isWebkit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isChrome</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isTouchable</span>
<span class="nv">ltSafari4 = </span><span class="nx">isSafari</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">w</span><span class="p">.</span><span class="nx">matchMedia</span>
<span class="nv">ltSafari5 = </span><span class="nx">isSafari</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">w</span><span class="p">.</span><span class="nx">FileReader</span>
<span class="nv">isSafari4 = </span><span class="nx">isSafari</span> <span class="o">&amp;&amp;</span> <span class="nx">ltSafari4</span>
<span class="nv">isSafari5 = </span><span class="nx">isSafari</span> <span class="o">&amp;&amp;</span> <span class="nx">ltSafari5</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltSafari4</span>
<span class="nv">isSafari6 = </span><span class="nx">isSafari</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltSafari5</span>
<span class="nv">isMobileIE = </span><span class="nx">isTouchable</span> <span class="o">&amp;&amp;</span> <span class="nx">isIE10</span>
<span class="nv">isMobileWebkit = </span><span class="nx">isTouchable</span> <span class="o">&amp;&amp;</span> <span class="nx">isWebkit</span>
<span class="nv">isMobileChrome = </span><span class="nx">isMobileWebkit</span> <span class="o">&amp;&amp;</span> <span class="nx">isChrome</span>
<span class="nv">isAndroid = </span><span class="nx">isMobileWebkit</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">w</span><span class="p">.</span><span class="nx">EventSource</span>
<span class="nv">ltAndroid21 = </span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">w</span><span class="p">.</span><span class="nx">onhashchange</span>
<span class="nv">ltAndroid22 = </span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">w</span><span class="p">.</span><span class="nx">Blob</span>
<span class="nv">ltAndroid23 = </span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">w</span><span class="p">.</span><span class="nx">FileReader</span>
<span class="nv">ltAndroid3 = </span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="nx">hasnt</span> <span class="nx">w</span><span class="p">.</span><span class="nx">ArrayBuffer</span>
<span class="nv">isAndroid21 = </span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="nx">ltAndroid21</span>
<span class="nv">isAndroid22 = </span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="nx">ltAndroid22</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltAndroid21</span>
<span class="nv">isAndroid23 = </span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="nx">ltAndroid23</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltAndroid22</span>
<span class="nv">isAndroid3 = </span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="nx">ltAndroid3</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltAndroid23</span>
<span class="nv">isAndroid4 = </span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ltAndroid3</span>
<span class="nv">isMobileSafari = </span><span class="nx">isMobileWebkit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isAndroid</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isMobileChrome</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h2>Functions</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">createUID = </span><span class="nf">-&gt;</span>
  <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">valueOf</span><span class="p">()</span> <span class="o">+</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">noop</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">).</span><span class="nx">valueOf</span><span class="p">().</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>

<span class="nv">createDiv = </span><span class="nf">-&gt;</span>
  <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span> <span class="s">&#39;div&#39;</span>

<span class="nv">inArray = </span><span class="nf">(array, needle) -&gt;</span>
  <span class="k">for</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">array</span>
    <span class="k">if</span> <span class="nx">item</span> <span class="o">is</span> <span class="nx">needle</span>
      <span class="k">return</span> <span class="kc">yes</span>
  <span class="k">return</span> <span class="kc">no</span>

<span class="nv">isString = </span><span class="nf">(string) -&gt;</span>
  <span class="k">return</span> <span class="nx">string</span> <span class="o">is</span> <span class="nb">String</span> <span class="nx">string</span>

<span class="nv">int = </span><span class="nf">(numericObject) -&gt;</span>
  <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">numericObject</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="nv">cssTop = </span><span class="nx">do</span> <span class="nf">-&gt;</span>
  <span class="k">unless</span> <span class="nx">hasntPosStyle</span>
    <span class="nv">name = </span><span class="s">&#39;posTop&#39;</span>
    <span class="nv">unit = </span><span class="mi">0</span>
  <span class="k">else</span>
    <span class="nv">name = </span><span class="s">&#39;top&#39;</span>
    <span class="nv">unit = </span><span class="s">&#39;px&#39;</span>
  <span class="k">return</span> <span class="nf">($elem, val) -&gt;</span>
    <span class="nx">$elem</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">style</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span> <span class="o">+</span> <span class="nx">unit</span>

<span class="nv">cssLeft = </span><span class="nx">do</span> <span class="nf">-&gt;</span>
  <span class="k">unless</span> <span class="nx">hasntPosStyle</span>
    <span class="nv">name = </span><span class="s">&#39;posLeft&#39;</span>
    <span class="nv">unit = </span><span class="mi">0</span>
  <span class="k">else</span>
    <span class="nv">name = </span><span class="s">&#39;left&#39;</span>
    <span class="nv">unit = </span><span class="s">&#39;px&#39;</span>
  <span class="k">return</span> <span class="nf">($elem, val) -&gt;</span>
    <span class="nx">$elem</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">style</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span> <span class="o">+</span> <span class="nx">unit</span>

<span class="nv">cssWidth = </span><span class="nx">do</span> <span class="nf">-&gt;</span>
  <span class="k">unless</span> <span class="nx">hasntPosStyle</span>
    <span class="nv">name = </span><span class="s">&#39;posWidth&#39;</span>
    <span class="nv">unit = </span><span class="mi">0</span>
  <span class="k">else</span>
    <span class="nv">name = </span><span class="s">&#39;width&#39;</span>
    <span class="nv">unit = </span><span class="s">&#39;px&#39;</span>
  <span class="k">return</span> <span class="nf">($elem, val) -&gt;</span>
    <span class="nx">$elem</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">style</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span> <span class="o">+</span> <span class="nx">unit</span>

<span class="nv">cssHeight = </span><span class="nx">do</span> <span class="nf">-&gt;</span>
  <span class="k">unless</span> <span class="nx">hasntPosStyle</span>
    <span class="nv">name = </span><span class="s">&#39;posHeight&#39;</span>
    <span class="nv">unit = </span><span class="mi">0</span>
  <span class="k">else</span>
    <span class="nv">name = </span><span class="s">&#39;height&#39;</span>
    <span class="nv">unit = </span><span class="s">&#39;px&#39;</span>
  <span class="k">return</span> <span class="nf">($elem, val) -&gt;</span>
    <span class="nx">$elem</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">style</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span> <span class="o">+</span> <span class="nx">unit</span>

<span class="nv">cssOpacity = </span><span class="nx">do</span> <span class="nf">-&gt;</span>
  <span class="k">return</span> <span class="nf">($elem, val) -&gt;</span>
    <span class="k">if</span> <span class="nx">ltIE8</span>
      <span class="nx">$elem</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nv">style.filter = </span><span class="s">&quot;filter:alpha(Opcity=</span><span class="si">#{</span><span class="nx">val</span> <span class="o">*</span> <span class="mi">100</span><span class="si">}</span><span class="s">)&quot;</span>
    <span class="k">else</span>
      <span class="nx">$elem</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nv">style.opacity = </span><span class="nx">val</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <h2>Checking Support for CSS3 and Event</h2>

<p>CSS3 の <code>Transfrom</code> <code>Transition</code> <code>Animation</code> とそれらのイベント、および <code>requestAnimationFrame</code> <code>performance</code> の対応状況のチェック。</p>

<p><strong>CSS Style オブジェクトで参照できるプロパティ名が格納される</strong></p>

<ul>
<li>Transform</li>
<li>Transition</li>
<li>Animation</li>
</ul>

<p><strong><code>addEventListener</code> の第一引数で利用できるイベント名</strong></p>

<ul>
<li>TransitionEnd</li>
<li>AnimationStart</li>
<li>AnimationIteration</li>
<li>AnimationEnd</li>
</ul>

<p><strong><code>window</code>オブジェクト(グローバルオブジェクト)から参照できるアニメーションフレーム関数名</strong></p>

<ul>
<li>RequestAnimationFrame</li>
<li>CancelAnimationFrame</li>
</ul>

<p><strong><code>window</code>オブジェクト(グローバルオブジェクト)から参照できる<code>Performance</code>オブジェクトのプロパティ名</strong></p>

<p><code>Performance</code>オブジェクトでなくても参照できるプロパティとしてほとんどのブラウザで存在はする。</p>

<ul>
<li>Performance</li>
</ul>

<p><strong><code>Performance</code>オブジェクトのタイマーメソッドのメソッド名</strong></p>

<p><code>requestAnimationFrame</code> 関数のコールバック関数に渡される第一引数と経過時間を計算するときに必要となる。</p>

<ul>
<li>PerformanceNow</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">supportCSS3 = </span><span class="nx">do</span> <span class="nf">-&gt;</span>
  <span class="nv">result = </span><span class="p">{}</span>
  <span class="nv">cssStyleDeclaration = </span><span class="nx">createDiv</span><span class="p">().</span><span class="nx">style</span> <span class="c1"># Dummy CSSStyleDeclaration Object</span>
  <span class="nv">venderPrefix = </span><span class="p">[</span>
    <span class="s">&#39;Webkit&#39;</span>
    <span class="s">&#39;Moz&#39;</span>
    <span class="s">&#39;O&#39;</span>
    <span class="s">&#39;Ms&#39;</span>
    <span class="s">&#39;&#39;</span>
  <span class="p">]</span>
  <span class="nv">cssProps = </span><span class="p">[</span>
    <span class="s">&#39;Transform&#39;</span>
    <span class="s">&#39;Transition&#39;</span>
    <span class="s">&#39;Animation&#39;</span>
  <span class="p">]</span>
  <span class="nv">eventProps = </span><span class="p">[</span>
    <span class="s">&#39;TransitionEnd&#39;</span>
    <span class="s">&#39;AnimationStart&#39;</span>
    <span class="s">&#39;AnimationIteration&#39;</span>
    <span class="s">&#39;AnimationEnd&#39;</span>
  <span class="p">]</span>
  <span class="nv">requestAnimationFrameMethods = </span><span class="p">[</span>
    <span class="s">&#39;RequestAnimationFrame&#39;</span>
    <span class="s">&#39;CancelAnimationFrame&#39;</span>
    <span class="s">&#39;Performance&#39;</span>
  <span class="p">]</span>
  <span class="k">for</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">cssProps</span><span class="p">.</span><span class="nx">concat</span> <span class="nx">eventProps</span><span class="p">,</span> <span class="nx">requestAnimationFrameMethods</span>
    <span class="nx">result</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span>
  <span class="k">for</span> <span class="nx">prefix</span> <span class="k">in</span> <span class="nx">venderPrefix</span>
    <span class="k">for</span> <span class="nx">cssProp</span> <span class="k">in</span> <span class="nx">cssProps</span>
      <span class="nv">patterns = </span><span class="p">[</span>
        <span class="nx">prefix</span> <span class="o">+</span> <span class="nx">cssProp</span>
        <span class="nx">prefix</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">cssProp</span>
        <span class="nx">prefix</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">cssProp</span>
        <span class="nx">prefix</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">cssProp</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
      <span class="p">]</span>
      <span class="k">for</span> <span class="nx">pattern</span> <span class="k">in</span> <span class="nx">patterns</span>
        <span class="k">if</span> <span class="nx">cssStyleDeclaration</span><span class="p">[</span><span class="nx">pattern</span><span class="p">]</span> <span class="o">isnt</span> <span class="kc">undefined</span>
          <span class="nx">result</span><span class="p">[</span><span class="nx">cssProp</span><span class="p">]</span> <span class="o">=</span> <span class="nx">pattern</span>
    <span class="k">for</span> <span class="nx">eventName</span> <span class="k">in</span> <span class="nx">eventProps</span>
      <span class="nv">patterns = </span><span class="p">[</span>
        <span class="nx">prefix</span> <span class="o">+</span> <span class="nx">eventName</span>
        <span class="nx">prefix</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">eventName</span>
        <span class="nx">prefix</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">eventName</span>
        <span class="nx">prefix</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">eventName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
      <span class="p">]</span>
      <span class="k">for</span> <span class="nx">pattern</span><span class="p">,</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">patterns</span>
        <span class="k">if</span> <span class="nx">w</span><span class="p">[</span><span class="s">&#39;on&#39;</span> <span class="o">+</span> <span class="nx">pattern</span><span class="p">]</span> <span class="o">isnt</span> <span class="kc">undefined</span>
          <span class="nx">result</span><span class="p">[</span><span class="nx">eventName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">pattern</span>
    <span class="k">for</span> <span class="nx">method</span> <span class="k">in</span> <span class="nx">requestAnimationFrameMethods</span>
      <span class="nv">patterns = </span><span class="p">[</span>
        <span class="nx">prefix</span> <span class="o">+</span> <span class="nx">method</span>
        <span class="nx">prefix</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">method</span>
        <span class="nx">prefix</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">method</span>
        <span class="nx">prefix</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">method</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
      <span class="p">]</span>
      <span class="k">for</span> <span class="nx">pattern</span> <span class="k">in</span> <span class="nx">patterns</span>
        <span class="k">if</span> <span class="nx">w</span><span class="p">[</span><span class="nx">pattern</span><span class="p">]</span> <span class="o">isnt</span> <span class="kc">undefined</span>
          <span class="nx">result</span><span class="p">[</span><span class="nx">method</span><span class="p">]</span> <span class="o">=</span> <span class="nx">pattern</span>
  <span class="nx">result</span><span class="p">[</span><span class="s">&#39;PerformanceNow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">Performance</span> <span class="o">and</span> <span class="nx">isFunction</span> <span class="nx">result</span><span class="p">.</span><span class="nx">Performance</span><span class="p">.</span><span class="nx">now</span>
  <span class="k">return</span> <span class="nx">result</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <hr />             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 